var e=class{constructor(e){let t;this.image=e,this.imageMap=document.querySelector(`[name=${this.image.useMap.split("#")[1]}]`),this.areas=this._getInitialMapAreas(),this.scale=this._getScale(),window.addEventListener("resize",(()=>{clearTimeout(t),t=setTimeout(this.update.bind(this),500)})),this.renderAreas()}update(){this.scale=this._getScale(),this.renderAreas()}renderAreas(){this.imageMap.innerHTML="";for(let e of this.areas)this.imageMap.appendChild(this._createAreaElement(e))}_createAreaElement(e){let t=document.createElement("area");for(let a of Object.keys(e.attributes))t[a]=e.attributes[a];return 1!==this.scale&&(t.coords=this._getScaledCoords(e)),t}_getInitialMapAreas(){let e=this.imageMap.querySelectorAll("area");return Array.from(e).map((e=>this._createAreaObjectFromElement(e)))}_createAreaObjectFromElement(e){let t={attributes:{}};return e.getAttributeNames().forEach((a=>t.attributes[a]=e[a])),t.coords=this._createAreaObjectCoords(t),t}_createAreaObjectCoords(e){let t,a=e.attributes.coords.split(",");switch(e.attributes.shape){case"circle":t=[{x:a[0],y:a[1],r:a[2]}];break;case"rect":t=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}];break;case"poly":t=[];for(let e=0;e<a.length;e+=2)t.push({x:a[e],y:a[e+1]})}return t}_getScaledCoords(e){let t,a=[];switch(e.attributes.shape){case"rect":case"poly":for(let t of e.coords)a.push(Math.round(t.x*this.scale)),a.push(Math.round(t.y*this.scale));t=a.join(",");break;case"circle":for(let t of e.coords)a.push(Math.round(t.x*this.scale)),a.push(Math.round(t.y*this.scale)),a.push(Math.round(t.r*this.scale));t=a.join(",");break;default:t=e.attributes.coords}return t}_getScale(){return this.image.width/this.image.naturalWidth}};document.documentElement.classList.remove("no-js"),document.documentElement.classList.add("js"),new e(document.querySelector("#map-image"));
//# sourceMappingURL=index.f705258e.js.map
